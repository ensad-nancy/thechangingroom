<!DOCTYPE html>
<html>
<head>
  <title></title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7" crossorigin="anonymous">
    <script src="//cdnjs.cloudflare.com/ajax/libs/less.js/2.5.3/less.min.js"></script>
    <link href='style.css' rel='stylesheet' type='text/css'>
</head>
<body>
    <div id="results" class="container-fluid"></div>
    <script id="activity" type="text/x-handlebars-template">
    {{debug}}
        {{#each posts}}
          <div class="row">
            <div class="col-sm-3"><h1>{{title}}{{{caption}}}</h1></div>

            <div class="col-sm-9">
              {{body}}

              {{#each photos}}
                <img src="{{original_size.url}}" class="img-responsive" >
              {{/each}}

              {{#each player}}
                {{{embed_code}}}
              {{/each}}
            </div>
          </div>
        {{/each}}
    </script>

    <script src="//code.jquery.com/jquery-1.12.0.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/handlebars.js/4.0.5/handlebars.min.js" type="text/javascript"></script>


  <script type="text/javascript">
    var templates = getTemplates();

    $.ajax({
        url: "http://api.tumblr.com/v2/blog/thechangingroom.tumblr.com/posts/?api_key=Srhk9qkcJO69pAoB4ltM5uIqpwUBO7kgDqDEaCD9Jo8EafWyHE&notes_info=true",
        dataType: 'jsonp',
        success: function(data){
            $('#results').html(templates.activity( data.response ) );
            $("img").addClass('img-responsive');
            $("iframe").addClass('embed-responsive-item').wrap( "<div class='embed-responsive embed-responsive-16by9'></div>" );;
        }
    });

    function getTemplates(){
      var t = [];
      $('script[type*=handlebars-template]').each(function(){
        t[$(this).attr('id')] = Handlebars.compile($(this).html());
      })
      return t;
    }

    Handlebars.registerHelper('debug', function(optionalValue) {
      console.log('Current Context');
      console.log('====================');
      console.log(this);

      if (optionalValue) {
        console.log('Value');
        console.log('====================');
        console.log(optionalValue);
      }
    });

     // great embed
  $("iframe").wrap('<div class="embed-responsive embed-responsive-16by9"/>');
  $("iframe").addClass('embed-responsive-item');

  </script>

</body>
</html>
