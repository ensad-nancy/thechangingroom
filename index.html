<!DOCTYPE html>
<html>
<head>
  <title></title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7" crossorigin="anonymous">
    <script src="//cdnjs.cloudflare.com/ajax/libs/less.js/2.5.3/less.min.js"></script>
    <link href='style.css' rel='stylesheet' type='text/css'>
</head>
<body>
    <div id="results"></div>
    <script id="activity" type="text/x-handlebars-template">
    {{debug}}
        {{#each posts}}
            <div class="col-sm-4"><h4>{{title}}</h4><hr/>{{{body}}}</div>
            
            <div class="col-sm-4">
              {{#each photos}}
                <img src="{{original_size.url}}" >
              {{/each}}
            </div>            

            <div class="col-sm-4">
            {{#each player}}
              {{{embed_code}}}
            {{/each}}
            </div>

        {{/each}}
    </script>

    <script src="//code.jquery.com/jquery-1.12.0.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/handlebars.js/4.0.5/handlebars.min.js" type="text/javascript"></script>


  <script type="text/javascript">
    var templates = getTemplates();

    $.ajax({
        url: "http://api.tumblr.com/v2/blog/thechangingroom.tumblr.com/posts/?api_key=Srhk9qkcJO69pAoB4ltM5uIqpwUBO7kgDqDEaCD9Jo8EafWyHE&notes_info=true",
        dataType: 'jsonp',
        success: function(data){
            $('#results').html(templates.activity( data.response ) );
            $("img").addClass('img-responsive');
            $("iframe").addClass('embed-responsive-item').wrap( "<div class='embed-responsive embed-responsive-16by9'></div>" );;
        }
    });

    function getTemplates(){
      var t = [];
      $('script[type*=handlebars-template]').each(function(){
        t[$(this).attr('id')] = Handlebars.compile($(this).html());
      })
      return t;
    }

    Handlebars.registerHelper('debug', function(optionalValue) {
      console.log('Current Context');
      console.log('====================');
      console.log(this);

      if (optionalValue) {
        console.log('Value');
        console.log('====================');
        console.log(optionalValue);
      }
    });
  </script>

</body>
</html>
